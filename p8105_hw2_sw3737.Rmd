---
title: "p8105_hw2_sw3737"
author: "Shiqi Wu"
output: github_document
date: "2023-10-04"
---

```{r setup}
library(tidyverse)
library(readxl)
library(dplyr)
```

## Problem 1

```{r import}
pols_data <- read.csv("data_files_hw2/pols-month.csv")
snp_data <- read.csv("data_files_hw2/snp.csv")
unemployment_data <- read.csv("data_files_hw2/unemployment.csv")
```

```{r pols cleaning}
cleaned_pols <- pols_data %>%
  separate(mon, into = c("year", "month", "day"), sep = "-") %>%
  mutate(year = as.integer(year),
         month = month.abb[as.integer(month)],
         president = ifelse(prez_dem == 1, "dem", "gop")) %>%
  select(-day, -prez_dem, -prez_gop)
```

```{r snp cleaning}
cleaned_snp <- snp_data %>%
  separate(date, into = c("year", "month", "day"), sep = "-") %>%
  mutate(year = as.integer(year),
         month = month.abb[as.integer(month)]) %>%
  select(year, month, everything()) %>%
  arrange(year, month)
```

```{r unemployment cleaning}
tidied_unemployment <- unemployment_data %>%
  rename(year = Year) %>%
  gather(key = "month", value = "unemployment_rate", -year) %>%
  mutate(month = match(month, month.abb))
```

```{r merging}
merged_data <- cleaned_pols %>%
  left_join(cleaned_snp, by = c("year", "month")) %>%
  left_join(tidied_unemployment, by = c("year", "month"))
```

### Data description

pols-month.csv: This dataset provides insight into the `distribution of national politicians`, whether democratic or republican, across various roles like president, governor, senator, and representative. The dataset has a temporal component indicated by the mon variable.

snp.csv: This dataset tracks the `closing values of the Standard & Poorâ€™s stock market index`, providing a gauge on the stock market's performance over time.

unemployment.csv: This dataset focuses on `unemployment rates`, segmented by month, over multiple years. This offers a view into the country's economic health and labor market trends.

The merged dataset, merged_data, seamlessly combines data from all three sources, linking them by year and month. With columns indicating `political distribution`, `stock market performance`, and `unemployment rates`, this dataset provides a comprehensive overview, facilitating an in-depth analysis of interrelationships between politics, the stock market, and unemployment.

## Problem 2

```{r Mr. Trash Wheel}
mtw_data <- read_excel("data_files_hw2/202309 Trash Wheel Collection Data.xlsx", sheet = "Mr. Trash Wheel",range = "A2:N586") %>%
  janitor::clean_names() %>%
  drop_na(dumpster) %>%
  mutate(
    homes_powered = (500 * weight_tons)/30,
    wheel_name = "Mr"
  )
```

